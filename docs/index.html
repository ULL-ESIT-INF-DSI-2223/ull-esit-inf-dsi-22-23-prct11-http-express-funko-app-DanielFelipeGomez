<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>ull-esit-inf-dsi-22-23-prct09-funko-app-DanielFelipeGomez</title><meta name="description" content="Documentation for ull-esit-inf-dsi-22-23-prct09-funko-app-DanielFelipeGomez"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base=".">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">ull-esit-inf-dsi-22-23-prct09-funko-app-DanielFelipeGomez</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-8 col-content">
<div class="tsd-page-title">
<h2>ull-esit-inf-dsi-22-23-prct09-funko-app-DanielFelipeGomez</h2></div>
<div class="tsd-panel tsd-typography">
<a href="#práctica-11---creación-de-una-aplicación-express-para-gestionar-el-registro-de-funko-pops" id="práctica-11---creación-de-una-aplicación-express-para-gestionar-el-registro-de-funko-pops" style="color: inherit; text-decoration: none;">
  <h1>Práctica 11 - Creación de una aplicación Express para gestionar el registro de Funko Pops</h1>
</a>

<a href="#daniel-felipe-gomez-aristizabal" id="daniel-felipe-gomez-aristizabal" style="color: inherit; text-decoration: none;">
  <h2>Daniel Felipe Gomez Aristizabal</h2>
</a>

<a href="#indice" id="indice" style="color: inherit; text-decoration: none;">
  <h2>Indice</h2>
</a>
<ol>
<li><p><a href="#introducci%C3%B3n">Introducción</a></p>
</li>
<li><p><a href="#idea-del-programa">Idea del programa</a></p>
</li>
<li><p><a href="#express">Express</a></p>
</li>
<li><p><a href="#modificacion-de-las-operaciones-con-funkos">Modificacion de las operaciones con Funkos</a></p>
</li>
<li><p><a href="#hablemos-de-los-test">Hablemos de los Test</a></p>
</li>
<li><p><a href="#thunder-client">Thunder Client</a></p>
</li>
<li><p><a href="#ejercicio-de-clase-pe">Ejercicio de clase PE</a></p>
</li>
<li><p><a href="#conclusiones">Conclusiones</a></p>
</li>
<li><p><a href="#referencias">Referencias</a></p>
</li>
</ol>

<a href="#introducción" id="introducción" style="color: inherit; text-decoration: none;">
  <h2>Introducción</h2>
</a>
<p>En la presente práctica desarrollaremos un programa cliente-servidor similar a la práctica anterior, con la diferencia de que ahora utilizaremos el framework Express para el desarrollo del servidor. A través de la ruta <strong>/funkos</strong> se podrá acceder a las operaciones CRUD de la colección de Funkos. Debemos entonces hacer uso de la lógica detrás de los Funkos ya desarrollada en la práctica 9 de la asignatura.</p>

<a href="#idea-del-programa" id="idea-del-programa" style="color: inherit; text-decoration: none;">
  <h2>Idea del programa</h2>
</a>
<p>Como la idea es atender distintos tipos de peticiones a través de la misma ruta, desarrollé primeramente una lógica de control para los 4 tipos de verbos HTTP, recordemos que estos son:</p>
<ul>
<li><p><strong>get</strong>: Para obtener información sobre un Funko Pop concreto de un usuario o para listar todos sus Funko Pops.</p>
</li>
<li><p><strong>post</strong>: Para añadir un Funko Pop a la lista de un usuario.</p>
</li>
<li><p><strong>delete</strong>: Para eliminar un Funko Pop de la lista de un usuario.</p>
</li>
<li><p><strong>patch</strong>: Para modificar la información de un Funko Pop existente en la lista de un usuario.</p>
</li>
</ul>
<p>Para esto definí una ruta <strong>/funkos</strong> y describí los verbos HTTP que se atenderán.</p>
<pre><code class="language-ts"><span class="hl-0">app</span><span class="hl-1">.</span><span class="hl-2">route</span><span class="hl-1">(</span><span class="hl-3">&#39;/funkos&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    .</span><span class="hl-2">get</span><span class="hl-1">((</span><span class="hl-0">req</span><span class="hl-1">, </span><span class="hl-0">res</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">// manejar solicitud GET</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-2">post</span><span class="hl-1">((</span><span class="hl-0">req</span><span class="hl-1">, </span><span class="hl-0">res</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">// manejar solicitud POST</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-2">delete</span><span class="hl-1">((</span><span class="hl-0">req</span><span class="hl-1">, </span><span class="hl-0">res</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">// manejar solicitud DELETE</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-2">patch</span><span class="hl-1">((</span><span class="hl-0">req</span><span class="hl-1">, </span><span class="hl-0">res</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">// manejar solicitud PATCH</span><br/><span class="hl-1">    });</span>
</code></pre>
<p>Luego dentro controlaré las diferentes peticiones que se intercepten, para esto dentro de cada correspondiente método HTTP, definí una serie de if else que se harán cargo de gestionar y llamar a su correspondiente función. La idea será que el usuario defina el tipo de petición y pase los argumentos necesarios para cada una de las funciones y en base a esto se ejecutará la lógica correspondiente.</p>

<a href="#express" id="express" style="color: inherit; text-decoration: none;">
  <h2>Express</h2>
</a>
<p>Para desarrollar el servidor haciendo uso de Express debo reconocer que me ha sido de mucha ayuda lo estudiado para la sesión práctica, incluso el esqueleto inicial para el desarrollo fue el mismo que el que diseñe en el ejercicio de dicha sesión. Tenemos un controlador de ruta genérica, donde mandaremos un error 404, este lo debemos ubicar al final de la página, ya que si lo ponemos primero interceptaría todas las rutas.</p>
<pre><code class="language-ts"><span class="hl-0">app</span><span class="hl-1">.</span><span class="hl-2">get</span><span class="hl-1">(</span><span class="hl-3">&#39;*&#39;</span><span class="hl-1">, (</span><span class="hl-0">req</span><span class="hl-1">, </span><span class="hl-0">res</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">res</span><span class="hl-1">.</span><span class="hl-2">status</span><span class="hl-1">(</span><span class="hl-6">404</span><span class="hl-1">)</span><br/><span class="hl-1">  </span><span class="hl-0">res</span><span class="hl-1">.</span><span class="hl-2">send</span><span class="hl-1">()</span><br/><span class="hl-1">})</span>
</code></pre>
<p>Recordemos que teniamos un controlador para la ruta <strong>/funkos</strong> y que este atendia diferentes tipos de peticiones HTTP, para atender por ejemplo la petición <strong>get</strong>, debemos verificar si se han pasado los dos argumentos que nos interesaban además de determinar si solo se ha pasado el nombre. </p>
<p>En caso de recibir el parámetro <strong>nombreUsuario</strong> y ninguno otro, sabemos que debemos atender la solicitud de listar todos los Funkos de un Usuario en particular. Por otro lado si no tenemos ni el parámetro <strong>nombreUsuario</strong> ni el <strong>id</strong> significa que la petición está mal y debemos informar al usuario de esto. Finalmente, si se han recibido los dos parámetros antes mencionados, debemos atender la solicitud de obtener un Funko Pop en particular de un Usuario en concreto.</p>
<p>Veamos entonces el caso de control para cada uno, al final este proceso se repetirá en las demás peticiones.</p>
<pre><code class="language-ts"><span class="hl-0">MenuFunko</span><span class="hl-1">.</span><span class="hl-2">listarFunkos</span><span class="hl-1">(</span><span class="hl-0">req</span><span class="hl-1">.</span><span class="hl-0">query</span><span class="hl-1">.</span><span class="hl-0">nombreUsuario</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-8">string</span><span class="hl-1">, (</span><span class="hl-0">funkoError</span><span class="hl-1">, </span><span class="hl-0">funkoData</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-0">funkoError</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">res</span><span class="hl-1">.</span><span class="hl-2">status</span><span class="hl-1">(</span><span class="hl-6">500</span><span class="hl-1">)</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">response</span><span class="hl-1">: </span><span class="hl-8">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">        </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;list&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">success:</span><span class="hl-1"> </span><span class="hl-4">false</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">funkoData:</span><span class="hl-1"> </span><span class="hl-0">funkoError</span><span class="hl-1">,</span><br/><br/><span class="hl-1">        };</span><br/><span class="hl-1">        </span><span class="hl-0">res</span><span class="hl-1">.</span><span class="hl-2">send</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-0">response</span><br/><span class="hl-1">        })</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    ...</span>
</code></pre>
<p>Como podemos una vez hemos determinado que existe un error en la petición, debemos controlarla informando al cliente, para esto cambiamos el estado de la respuesta a 500, informando del error provocado en el servidor. Ahora formamos la respuesta, definiendo el tipo de petición y marcando la opción de <strong>success</strong> como false, para indicar que la petición ha fracasado, además mediante la variable <strong>funkoData</strong> pasamos el error que se ha producido. Finalmente enviamos la respuesta al cliente.</p>
<p>Ahora veamos el caso de una petición sin errores determinados por el servidor:</p>
<pre><code class="language-ts"><span class="hl-1">    ...</span><br/><span class="hl-1">    </span><span class="hl-7">else</span><span class="hl-1"> </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-0">funkoData</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">response</span><span class="hl-1">: </span><span class="hl-8">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">        </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;list&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">success:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">funkoData:</span><span class="hl-1"> </span><span class="hl-0">funkoData</span><span class="hl-1">,</span><br/><span class="hl-1">        };</span><br/><span class="hl-1">        </span><span class="hl-0">res</span><span class="hl-1">.</span><span class="hl-2">send</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-0">response</span><br/><span class="hl-1">        })</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">});</span>
</code></pre>
<p>Como podemos apreciar, si tenemos datos del servidor, vamos a contruir la repsuesta del servidor de forma similar a como veiamos antes, con la diferencia de informar que la petición ha sido exitosa, por tanto <strong>success</strong> será true y además pasamos los datos que nos ha devuelto el servidor.</p>
<p>Esta lógica que acabamos de representar es la que se siguió para todos los tipos de peticiones, por tanto no la repetiré en el informe, pero si se puede ver en el código del servidor o en la documentación del mismo.</p>

<a href="#modificacion-de-las-operaciones-con-funkos" id="modificacion-de-las-operaciones-con-funkos" style="color: inherit; text-decoration: none;">
  <h2>Modificacion de las operaciones con Funkos</h2>
</a>
<p>Como vimos anteriormente llamamos a una serie arrow functions encargadas de realizar las operaciones con los Funkos y los ficheros, estás funciones se encuentran en el fichero <strong>menuFunko.ts</strong>. Anteriormente estas eran funciones estáticas que se encargaban de realizar las operaciones correspondientes, pero para el desarrollo de esta práctica se han modificado para que sigan el patrón callback, veamos un ejemplo:</p>
<pre><code class="language-ts"><span class="hl-0">static</span><span class="hl-1"> </span><span class="hl-2">listarFunkos</span><span class="hl-1"> = (</span><span class="hl-0">nombreUsuario</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">,  </span><span class="hl-2">callback</span><span class="hl-1">: (</span><br/><span class="hl-1">    </span><span class="hl-0">err</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1"> | </span><span class="hl-8">undefined</span><span class="hl-1">, </span><span class="hl-0">data</span><span class="hl-1">: </span><span class="hl-8">Funko</span><span class="hl-1">[] | </span><span class="hl-8">undefined</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-8">void</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">files</span><span class="hl-1"> = </span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-2">readdirSync</span><span class="hl-1">(</span><span class="hl-3">&#39;./db/&#39;</span><span class="hl-1"> + </span><span class="hl-0">nombreUsuario</span><span class="hl-1"> + </span><span class="hl-3">&#39;/&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-0">listaFunkos</span><span class="hl-1">: </span><span class="hl-8">Funko</span><span class="hl-1">[] = []</span><br/><span class="hl-1">    </span><span class="hl-0">files</span><span class="hl-1">.</span><span class="hl-2">forEach</span><span class="hl-1">(</span><span class="hl-0">file</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">funkoJSON</span><span class="hl-1"> = </span><span class="hl-0">ManejadorJSON</span><span class="hl-1">.</span><span class="hl-2">leerJSON</span><span class="hl-1">(</span><span class="hl-3">&#39;./db/&#39;</span><span class="hl-1"> + </span><span class="hl-0">nombreUsuario</span><span class="hl-1"> + </span><span class="hl-3">&#39;/&#39;</span><span class="hl-1"> + </span><span class="hl-0">file</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-0">funkoJSON</span><span class="hl-1"> !== </span><span class="hl-4">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">funko</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-2">Funko</span><span class="hl-1">(</span><span class="hl-0">funkoJSON</span><span class="hl-1">.</span><span class="hl-0">_id</span><span class="hl-1">, </span><span class="hl-0">funkoJSON</span><span class="hl-1">.</span><span class="hl-0">_nombre</span><span class="hl-1">, </span><span class="hl-0">funkoJSON</span><span class="hl-1">.</span><span class="hl-0">_descripcion</span><span class="hl-1">, </span><span class="hl-0">funkoJSON</span><span class="hl-1">.</span><span class="hl-0">_tipo</span><span class="hl-1">, </span><span class="hl-0">funkoJSON</span><span class="hl-1">.</span><span class="hl-0">_genero</span><span class="hl-1">, </span><span class="hl-0">funkoJSON</span><span class="hl-1">.</span><span class="hl-0">_franquicia</span><span class="hl-1">, </span><span class="hl-0">funkoJSON</span><span class="hl-1">.</span><span class="hl-0">_numero</span><span class="hl-1">, </span><span class="hl-0">funkoJSON</span><span class="hl-1">.</span><span class="hl-0">_exclusivo</span><span class="hl-1">, </span><span class="hl-0">funkoJSON</span><span class="hl-1">.</span><span class="hl-0">_caracteristica_especial</span><span class="hl-1">, </span><span class="hl-0">funkoJSON</span><span class="hl-1">.</span><span class="hl-0">_valor_mercado</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-0">listaFunkos</span><span class="hl-1">.</span><span class="hl-2">push</span><span class="hl-1">(</span><span class="hl-0">funko</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">    </span><span class="hl-2">callback</span><span class="hl-1">(</span><span class="hl-4">undefined</span><span class="hl-1">, </span><span class="hl-0">listaFunkos</span><span class="hl-1">);</span><br/><span class="hl-1">};</span>
</code></pre>
<p>Si nos fijamos en la definición ahora tenemos los parámetros necesarios para llevar a cabo la operación y además un callback que se encargará de devolver los datos al servidor. En este caso el callback recibe dos parámetros, el primero es un string que puede ser undefined o un mensaje de error, el segundo es un array de Funkos que puede ser undefined o un array de Funkos.</p>
<p>La idea será llevar a cabo el código que ya se tenía para realizar la operación con la diferencia que ahora no se imprime por pantalla, sino que se llama al callback con los datos correspondientes. En caso de que se produzca un error, se llama al callback con el error correspondiente.</p>
<p>Esto lo que nos permite es que como vimos antes, desde la parte del servidor, haciendo uso del patrón callback chaining, podemos controlar la respuesta del servidor en base a los datos que nos devuelva el callback.</p>

<a href="#hablemos-de-los-tests" id="hablemos-de-los-tests" style="color: inherit; text-decoration: none;">
  <h2>Hablemos de los tests</h2>
</a>
<p>Para realizar los test con <strong>mocha</strong> y <strong>chai</strong>, he seguido un ejemplo de los apuntes de la asignatura donde se propone hacer una <strong>request</strong>, de esta forma teniendo el servidor activo, podemos hacer una consulta al servidor como lo hacemos desde el <strong>Thunder Client</strong>. Para la prueba he creado un Funko para un usuario &#39;Test&#39; y luego le he modificado dicho Funko, posteriormente lo he obtenido de forma particular y general con <strong>GET</strong> y por último lo he eliminado.</p>
<p>Veamos un ejemplo de como definimos la <strong>url</strong> para realizar la consulta y luego mediante <strong>request</strong> hacemos la consulta al servidor, debemos especificar el método, en este casi <strong>POST</strong>. Luego dentro del manejador de la respuesta, comprobamos que el código de estado sea 200, que la respuesta sea un objeto, que el objeto tenga una propiedad <strong>response</strong> que sea un objeto, que el tipo de petición sea <strong>add</strong> y que la petición haya sido exitosa, además de comprobar que los datos del Funko que se ha añadido son los que esperamos.</p>
<pre><code class="language-ts"><span class="hl-2">it</span><span class="hl-1">(</span><span class="hl-3">&#39;Consulta de añadir un funko&#39;</span><span class="hl-1">, (</span><span class="hl-0">done</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">url</span><span class="hl-1"> = </span><span class="hl-3">&quot;http://localhost:3000/funkos?nombreUsuario=Test&amp;id=1&amp;nombre=TestFunko&amp;descripcion=TestFunko&amp;tipo=Pop!&amp;genero=test&amp;franquicia=test&amp;numero=1&amp;caracteristica_especial=&#39;Hace tests&#39;&amp;valor_mercado=1000&quot;</span><br/><span class="hl-1">    </span><span class="hl-2">request</span><span class="hl-1">({</span><span class="hl-0">method:</span><span class="hl-1"> </span><span class="hl-3">&#39;POST&#39;</span><span class="hl-1">, </span><span class="hl-0">url:</span><span class="hl-1"> </span><span class="hl-0">url</span><span class="hl-1">, </span><span class="hl-0">json:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">}, (</span><span class="hl-0">error</span><span class="hl-1">: </span><span class="hl-8">Error</span><span class="hl-1">, </span><span class="hl-0">response</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">statusCode</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-6">200</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">an</span><span class="hl-1">(</span><span class="hl-3">&#39;object&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">an</span><span class="hl-1">(</span><span class="hl-3">&#39;object&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">type</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&#39;add&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">success</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-4">true</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">an</span><span class="hl-1">(</span><span class="hl-3">&#39;object&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">_id</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-6">1</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">_nombre</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&#39;TestFunko&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">_descripcion</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&#39;TestFunko&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">_tipo</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&#39;Pop!&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">_genero</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&#39;test&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">_franquicia</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&#39;test&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">_numero</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-6">1</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">_caracteristica_especial</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&quot;&#39;Hace tests&#39;&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">_valor_mercado</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-6">1000</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">    </span><span class="hl-2">done</span><span class="hl-1">()</span><br/><span class="hl-1">  });</span><br/><span class="hl-3">```	</span><br/><br/><span class="hl-3">En el caso de la modificación, la única diferencia es que el método es **PATCH** y que comprobamos que el tipo de petición sea **update** y que la petición haya sido exitosa.</span><br/><br/><span class="hl-3">```</span><span class="hl-0">ts</span><br/><span class="hl-1">  </span><span class="hl-2">it</span><span class="hl-1">(</span><span class="hl-3">&#39;Consultar de modificacion de un funko&#39;</span><span class="hl-1">, (</span><span class="hl-0">done</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">url</span><span class="hl-1"> = </span><span class="hl-3">&quot;http://localhost:3000/funkos?nombreUsuario=Test&amp;id=1&amp;nombre=TestFunkoModificado&amp;descripcion=TestFunkoModificado&amp;tipo=Pop!&amp;genero=test&amp;franquicia=test&amp;numero=1&amp;caracteristica_especial=&#39;Hace tests&#39;&amp;valor_mercado=1000&quot;</span><br/><span class="hl-1">    </span><span class="hl-2">request</span><span class="hl-1">({</span><span class="hl-0">method:</span><span class="hl-1"> </span><span class="hl-3">&#39;PATCH&#39;</span><span class="hl-1">, </span><span class="hl-0">url:</span><span class="hl-1"> </span><span class="hl-0">url</span><span class="hl-1">, </span><span class="hl-0">json:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">}, (</span><span class="hl-0">error</span><span class="hl-1">: </span><span class="hl-8">Error</span><span class="hl-1">, </span><span class="hl-0">response</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">statusCode</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-6">200</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">an</span><span class="hl-1">(</span><span class="hl-3">&#39;object&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">an</span><span class="hl-1">(</span><span class="hl-3">&#39;object&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">type</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&#39;update&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">success</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-4">true</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">an</span><span class="hl-1">(</span><span class="hl-3">&#39;object&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">_id</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-6">1</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">_nombre</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&#39;TestFunkoModificado&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">_descripcion</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&#39;TestFunkoModificado&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">_tipo</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&#39;Pop!&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">_genero</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&#39;test&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">_franquicia</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&#39;test&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">_numero</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-6">1</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">_caracteristica_especial</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&quot;&#39;Hace tests&#39;&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">_valor_mercado</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-6">1000</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">    </span><span class="hl-2">done</span><span class="hl-1">()</span><br/><span class="hl-1">  });</span>
</code></pre>
<p>Para el caso de la consulta tendremos un caso donde consultamos un Funko en específico, en este caso debemos usar el método <strong>GET</strong>.</p>
<pre><code class="language-ts"><span class="hl-1">  </span><span class="hl-2">it</span><span class="hl-1">(</span><span class="hl-3">&#39;Consultar de consulta de un funko&#39;</span><span class="hl-1">, (</span><span class="hl-0">done</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">url</span><span class="hl-1"> = </span><span class="hl-3">&quot;http://localhost:3000/funkos?nombreUsuario=Test&amp;id=1&quot;</span><br/><span class="hl-1">    </span><span class="hl-2">request</span><span class="hl-1">({</span><span class="hl-0">method:</span><span class="hl-1"> </span><span class="hl-3">&#39;GET&#39;</span><span class="hl-1">, </span><span class="hl-0">url:</span><span class="hl-1"> </span><span class="hl-0">url</span><span class="hl-1">, </span><span class="hl-0">json:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">}, (</span><span class="hl-0">error</span><span class="hl-1">: </span><span class="hl-8">Error</span><span class="hl-1">, </span><span class="hl-0">response</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">statusCode</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-6">200</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">an</span><span class="hl-1">(</span><span class="hl-3">&#39;object&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">an</span><span class="hl-1">(</span><span class="hl-3">&#39;object&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">type</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&#39;read&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">success</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-4">true</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">an</span><span class="hl-1">(</span><span class="hl-3">&#39;object&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">_id</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-6">1</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">_nombre</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&#39;TestFunkoModificado&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">_descripcion</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&#39;TestFunkoModificado&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">_tipo</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&#39;Pop!&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">_genero</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&#39;test&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">_franquicia</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&#39;test&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">_numero</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-6">1</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">_caracteristica_especial</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&quot;&#39;Hace tests&#39;&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">_valor_mercado</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-6">1000</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">    </span><span class="hl-2">done</span><span class="hl-1">()</span><br/><span class="hl-1">  });</span><br/>
</code></pre>
<p>En este otro caso también usamos el método <strong>GET</strong> pero en este caso consultamos todos los Funkos que tenemos en la base de datos para un usuario en específico.</p>
<pre><code class="language-ts"><span class="hl-1">  </span><span class="hl-2">it</span><span class="hl-1">(</span><span class="hl-3">&#39;Consultar de consulta de todos los funkos&#39;</span><span class="hl-1">, (</span><span class="hl-0">done</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">url</span><span class="hl-1"> = </span><span class="hl-3">&quot;http://localhost:3000/funkos?nombreUsuario=Test&quot;</span><br/><span class="hl-1">    </span><span class="hl-2">request</span><span class="hl-1">({</span><span class="hl-0">method:</span><span class="hl-1"> </span><span class="hl-3">&#39;GET&#39;</span><span class="hl-1">, </span><span class="hl-0">url:</span><span class="hl-1"> </span><span class="hl-0">url</span><span class="hl-1">, </span><span class="hl-0">json:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">}, (</span><span class="hl-0">error</span><span class="hl-1">: </span><span class="hl-8">Error</span><span class="hl-1">, </span><span class="hl-0">response</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">statusCode</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-6">200</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">an</span><span class="hl-1">(</span><span class="hl-3">&#39;object&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">an</span><span class="hl-1">(</span><span class="hl-3">&#39;object&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">type</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&#39;list&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">success</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-4">true</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">an</span><span class="hl-1">(</span><span class="hl-3">&#39;array&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">[</span><span class="hl-6">0</span><span class="hl-1">].</span><span class="hl-0">_id</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-6">1</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">[</span><span class="hl-6">0</span><span class="hl-1">].</span><span class="hl-0">_nombre</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&#39;TestFunkoModificado&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">[</span><span class="hl-6">0</span><span class="hl-1">].</span><span class="hl-0">_descripcion</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&#39;TestFunkoModificado&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">[</span><span class="hl-6">0</span><span class="hl-1">].</span><span class="hl-0">_tipo</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&#39;Pop!&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">[</span><span class="hl-6">0</span><span class="hl-1">].</span><span class="hl-0">_genero</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&#39;test&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">[</span><span class="hl-6">0</span><span class="hl-1">].</span><span class="hl-0">_franquicia</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&#39;test&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">[</span><span class="hl-6">0</span><span class="hl-1">].</span><span class="hl-0">_numero</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-6">1</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">[</span><span class="hl-6">0</span><span class="hl-1">].</span><span class="hl-0">_caracteristica_especial</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&quot;&#39;Hace tests&#39;&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">[</span><span class="hl-6">0</span><span class="hl-1">].</span><span class="hl-0">_valor_mercado</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-6">1000</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">    </span><span class="hl-2">done</span><span class="hl-1">()</span><br/><span class="hl-1">  });</span><br/>
</code></pre>
<p>Finalmente tenemos el caso de borrado, en este caso usamos el método <strong>DELETE</strong>.</p>
<pre><code class="language-ts"><span class="hl-1">  </span><span class="hl-2">it</span><span class="hl-1">(</span><span class="hl-3">&#39;Consultar de borrado de un funko&#39;</span><span class="hl-1">, (</span><span class="hl-0">done</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">url</span><span class="hl-1"> = </span><span class="hl-3">&quot;http://localhost:3000/funkos?nombreUsuario=Test&amp;id=1&quot;</span><br/><span class="hl-1">    </span><span class="hl-2">request</span><span class="hl-1">({</span><span class="hl-0">method:</span><span class="hl-1"> </span><span class="hl-3">&#39;DELETE&#39;</span><span class="hl-1">, </span><span class="hl-0">url:</span><span class="hl-1"> </span><span class="hl-0">url</span><span class="hl-1">, </span><span class="hl-0">json:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">}, (</span><span class="hl-0">error</span><span class="hl-1">: </span><span class="hl-8">Error</span><span class="hl-1">, </span><span class="hl-0">response</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">statusCode</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-6">200</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">an</span><span class="hl-1">(</span><span class="hl-3">&#39;object&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">an</span><span class="hl-1">(</span><span class="hl-3">&#39;object&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">type</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&#39;delete&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">success</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-4">true</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">expect</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">funkoData</span><span class="hl-1">).</span><span class="hl-0">to</span><span class="hl-1">.</span><span class="hl-0">be</span><span class="hl-1">.</span><span class="hl-2">equal</span><span class="hl-1">(</span><span class="hl-3">&#39;Eliminado el funko 1&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">    </span><span class="hl-2">done</span><span class="hl-1">()</span><br/><span class="hl-1">  });</span>
</code></pre>
<p>Lo hice de esta forma, para que cuando se ejecuten los test, el orden permita que nunca hayan archivos requeridos no existentes.</p>

<a href="#thunder-client" id="thunder-client" style="color: inherit; text-decoration: none;">
  <h2>Thunder Client</h2>
</a>
<p>Para probar mi prográma hice uso de Thunder Client, básicamente por la comodidad a la hora de poner los parámetros ya que algunas peticiones necesitan demasiados, además de que me permite probar distintos tipos de peticiones HTTP. A continuación veremos algunos ejemplos de peticiones que he realizado.</p>
<p>GET</p>
<pre><code class="language-url">http://localhost:3000/funkos?nombreUsuario=Dani
</code></pre>
<pre><code class="language-json"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-10">&quot;response&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-10">&quot;type&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;list&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-10">&quot;success&quot;</span><span class="hl-1">: </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-10">&quot;funkoData&quot;</span><span class="hl-1">: [</span><br/><span class="hl-1">      {</span><br/><span class="hl-1">        </span><span class="hl-10">&quot;_id&quot;</span><span class="hl-1">: </span><span class="hl-6">1</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-10">&quot;_nombre&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;Poco&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-10">&quot;_descripcion&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;Un poquito loco&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-10">&quot;_tipo&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;Pop!&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-10">&quot;_genero&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;Comidas y Sabores&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-10">&quot;_franquicia&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;BrawlStars&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-10">&quot;_numero&quot;</span><span class="hl-1">: </span><span class="hl-6">4</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-10">&quot;_exclusivo&quot;</span><span class="hl-1">: </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-10">&quot;_caracteristica_especial&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;Toca musica&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-10">&quot;_valor_mercado&quot;</span><span class="hl-1">: </span><span class="hl-6">100</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      {</span><br/><span class="hl-1">        </span><span class="hl-10">&quot;_id&quot;</span><span class="hl-1">: </span><span class="hl-6">2</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-10">&quot;_nombre&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;Poco&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-10">&quot;_descripcion&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;&#39;No tan loco&#39;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-10">&quot;_tipo&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;&#39;Pop!&#39;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-10">&quot;_genero&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;juego&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-10">&quot;_franquicia&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;BrawlStars&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-10">&quot;_numero&quot;</span><span class="hl-1">: </span><span class="hl-6">4</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-10">&quot;_caracteristica_especial&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;&#39;Toca guitarra&#39;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-10">&quot;_valor_mercado&quot;</span><span class="hl-1">: </span><span class="hl-6">100</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    ]</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>
<p>GET con id</p>
<pre><code class="language-url">http://localhost:3000/funkos?nombreUsuario=Dani&amp;id=2
</code></pre>
<pre><code class="language-json"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-10">&quot;response&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-10">&quot;type&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;read&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-10">&quot;success&quot;</span><span class="hl-1">: </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-10">&quot;funkoData&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">      </span><span class="hl-10">&quot;_id&quot;</span><span class="hl-1">: </span><span class="hl-6">2</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-10">&quot;_nombre&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;Poco&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-10">&quot;_descripcion&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;&#39;No tan loco&#39;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-10">&quot;_tipo&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;&#39;Pop!&#39;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-10">&quot;_genero&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;juego&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-10">&quot;_franquicia&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;BrawlStars&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-10">&quot;_numero&quot;</span><span class="hl-1">: </span><span class="hl-6">4</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-10">&quot;_caracteristica_especial&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;&#39;Toca guitarra&#39;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-10">&quot;_valor_mercado&quot;</span><span class="hl-1">: </span><span class="hl-6">100</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>
<p>POST</p>
<pre><code class="language-url">http://localhost:3000/funkos?nombreUsuario=Messi&amp;id=2&amp;nombre=Poco&amp;descripcion=&#39;No tan loco&#39;&amp;tipo=&#39;Pop!&#39;&amp;genero=juego&amp;franquicia=BrawlStars&amp;numero=4&amp;caracteristica_especial=&#39;Toca guitarra&#39;&amp;valor_mercado=100
</code></pre>
<pre><code class="language-json"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-10">&quot;response&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-10">&quot;type&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;read&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-10">&quot;success&quot;</span><span class="hl-1">: </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-10">&quot;funkoData&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">      </span><span class="hl-10">&quot;_id&quot;</span><span class="hl-1">: </span><span class="hl-6">2</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-10">&quot;_nombre&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;Poco&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-10">&quot;_descripcion&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;&#39;No tan loco&#39;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-10">&quot;_tipo&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;&#39;Pop!&#39;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-10">&quot;_genero&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;juego&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-10">&quot;_franquicia&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;BrawlStars&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-10">&quot;_numero&quot;</span><span class="hl-1">: </span><span class="hl-6">4</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-10">&quot;_caracteristica_especial&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;&#39;Toca guitarra&#39;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-10">&quot;_valor_mercado&quot;</span><span class="hl-1">: </span><span class="hl-6">100</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>
<p>PATCH</p>
<pre><code class="language-url">http://localhost:3000/funkos?nombreUsuario=Messi&amp;id=2&amp;nombre=MUYPOCO&amp;descripcion=&#39;No tan loco&#39;&amp;tipo=&#39;Pop!&#39;&amp;genero=juego&amp;franquicia=BrawlStars&amp;numero=4&amp;caracteristica_especial=&#39;Toca guitarra&#39;&amp;valor_mercado=100
</code></pre>
<pre><code class="language-json"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-10">&quot;response&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-10">&quot;type&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;update&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-10">&quot;success&quot;</span><span class="hl-1">: </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-10">&quot;funkoData&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">      </span><span class="hl-10">&quot;_id&quot;</span><span class="hl-1">: </span><span class="hl-6">2</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-10">&quot;_nombre&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;MUYPOCO&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-10">&quot;_descripcion&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;&#39;No tan loco&#39;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-10">&quot;_tipo&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;&#39;Pop!&#39;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-10">&quot;_genero&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;juego&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-10">&quot;_franquicia&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;BrawlStars&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-10">&quot;_numero&quot;</span><span class="hl-1">: </span><span class="hl-6">4</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-10">&quot;_caracteristica_especial&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;&#39;Toca guitarra&#39;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-10">&quot;_valor_mercado&quot;</span><span class="hl-1">: </span><span class="hl-6">100</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>
<p>DELETE</p>
<pre><code class="language-url">http://localhost:3000/funkos?nombreUsuario=Dani&amp;id=2
</code></pre>
<pre><code class="language-json"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-10">&quot;response&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-10">&quot;type&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;delete&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-10">&quot;success&quot;</span><span class="hl-1">: </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-10">&quot;funkoData&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;Eliminado el funko 2&quot;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#ejercicio-de-clase-pe" id="ejercicio-de-clase-pe" style="color: inherit; text-decoration: none;">
  <h2>Ejercicio de clase PE</h2>
</a>
<p>Para evaluar la sesión PE, se nos pidió desarrollar un programa cliente-servidor con Express donde se hciiera peticiones a WeatherStack, debiamos poder controlar las peticiones fallidas del servidor, las peticiones a rutas inexistentes y las peticiones exitosas.</p>
<p>Para poder realizar las peticiones en WeatherStack, desarrollé una arrow function que recibía la localización que deseábamos consultar y como segundo parámetro un callback que se encargaba de devolver los datos al servidor. En caso de que se produjera un error, se llamaba al callback con el error correspondiente.</p>
<pre><code class="language-ts"><span class="hl-7">import</span><span class="hl-1"> </span><span class="hl-0">request</span><span class="hl-1"> </span><span class="hl-7">from</span><span class="hl-1"> </span><span class="hl-3">&#39;request&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-7">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-2">weatherInfo</span><span class="hl-1"> = (</span><span class="hl-0">location</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">, </span><span class="hl-2">callback</span><span class="hl-1">: (</span><br/><span class="hl-1">    </span><span class="hl-0">err</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1"> | </span><span class="hl-8">undefined</span><span class="hl-1">, </span><span class="hl-0">data</span><span class="hl-1">: </span><span class="hl-8">request</span><span class="hl-1">.</span><span class="hl-8">Response</span><span class="hl-1"> | </span><span class="hl-8">undefined</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-8">void</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">url</span><span class="hl-1"> = </span><span class="hl-3">`http://api.weatherstack.com/current?access_key=4e82091e9a7cd4ce349be91ea9b4417a&amp;query=</span><span class="hl-4">${</span><span class="hl-2">encodeURIComponent</span><span class="hl-11">(</span><span class="hl-0">location</span><span class="hl-11">)</span><span class="hl-4">}</span><span class="hl-3">&amp;units=m`</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><br/><span class="hl-1">    </span><span class="hl-2">request</span><span class="hl-1">({</span><span class="hl-0">url:</span><span class="hl-1"> </span><span class="hl-0">url</span><span class="hl-1">, </span><span class="hl-0">json:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">}, (</span><span class="hl-0">error</span><span class="hl-1">: </span><span class="hl-8">Error</span><span class="hl-1">, </span><span class="hl-0">response</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-0">error</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-2">callback</span><span class="hl-1">(</span><span class="hl-3">`Weatherstack API is not available: </span><span class="hl-4">${</span><span class="hl-0">error</span><span class="hl-11">.</span><span class="hl-0">message</span><span class="hl-4">}</span><span class="hl-3">`</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-4">undefined</span><span class="hl-1">);</span><br/><span class="hl-1">      } </span><span class="hl-7">else</span><span class="hl-1"> </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-2">callback</span><span class="hl-1">(</span><span class="hl-3">`Weatherstack API error: </span><span class="hl-4">${</span><span class="hl-0">response</span><span class="hl-11">.</span><span class="hl-0">body</span><span class="hl-11">.</span><span class="hl-0">error</span><span class="hl-11">.</span><span class="hl-0">type</span><span class="hl-4">}</span><span class="hl-3">`</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-4">undefined</span><span class="hl-1">);</span><br/><span class="hl-1">      } </span><span class="hl-7">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">callback</span><span class="hl-1">(</span><span class="hl-4">undefined</span><span class="hl-1">, </span><span class="hl-0">response</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">};</span>
</code></pre>
<p>Por la parte del servidor, tenemos lo siguiente:</p>
<pre><code class="language-ts"><span class="hl-7">import</span><span class="hl-1"> </span><span class="hl-0">express</span><span class="hl-1"> </span><span class="hl-7">from</span><span class="hl-1"> </span><span class="hl-3">&#39;express&#39;</span><span class="hl-1">;</span><br/><span class="hl-7">import</span><span class="hl-1"> {</span><span class="hl-0">weatherInfo</span><span class="hl-1">} </span><span class="hl-7">from</span><span class="hl-1"> </span><span class="hl-3">&#39;./get_weather.js&#39;</span><br/><span class="hl-7">import</span><span class="hl-1"> {</span><span class="hl-0">ResponseType</span><span class="hl-1">} </span><span class="hl-7">from</span><span class="hl-1"> </span><span class="hl-3">&#39;./response_type.js&#39;</span><br/><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">app</span><span class="hl-1"> = </span><span class="hl-2">express</span><span class="hl-1">();</span><br/><br/><br/><br/><span class="hl-0">app</span><span class="hl-1">.</span><span class="hl-2">get</span><span class="hl-1">(</span><span class="hl-3">&#39;/weather&#39;</span><span class="hl-1">, (</span><span class="hl-0">req</span><span class="hl-1">, </span><span class="hl-0">res</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">  </span><span class="hl-7">if</span><span class="hl-1"> (!</span><span class="hl-0">req</span><span class="hl-1">.</span><span class="hl-0">query</span><span class="hl-1">.</span><span class="hl-0">location</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-0">res</span><span class="hl-1">.</span><span class="hl-2">status</span><span class="hl-1">(</span><span class="hl-6">400</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">res</span><span class="hl-1">.</span><span class="hl-2">send</span><span class="hl-1">({</span><br/><span class="hl-1">      </span><span class="hl-0">error:</span><span class="hl-1"> </span><span class="hl-3">&#39;A location has to be provided&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  } </span><span class="hl-7">else</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">weatherInfo</span><span class="hl-1">(</span><span class="hl-0">req</span><span class="hl-1">.</span><span class="hl-0">query</span><span class="hl-1">.</span><span class="hl-0">location</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-8">string</span><span class="hl-1">, (</span><span class="hl-0">weatherErr</span><span class="hl-1">, </span><span class="hl-0">weatherData</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-0">weatherErr</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">res</span><span class="hl-1">.</span><span class="hl-2">status</span><span class="hl-1">(</span><span class="hl-6">500</span><span class="hl-1">)</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">response</span><span class="hl-1">: </span><span class="hl-8">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">          </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;read&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-0">success:</span><span class="hl-1"> </span><span class="hl-4">false</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-0">weather:</span><span class="hl-1"> </span><span class="hl-0">weatherErr</span><span class="hl-1">,</span><br/><br/><span class="hl-1">        };</span><br/><span class="hl-1">        </span><span class="hl-0">res</span><span class="hl-1">.</span><span class="hl-2">send</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-0">response</span><br/><span class="hl-1">        })</span><br/><span class="hl-1">      } </span><span class="hl-7">else</span><span class="hl-1"> </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-0">weatherData</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">response</span><span class="hl-1">: </span><span class="hl-8">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">          </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;read&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-0">success:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-0">weather:</span><span class="hl-1"> </span><span class="hl-0">weatherData</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">,</span><br/><span class="hl-1">        };</span><br/><span class="hl-1">        </span><span class="hl-0">res</span><span class="hl-1">.</span><span class="hl-2">send</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-0">response</span><br/><span class="hl-1">        })</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-0">app</span><span class="hl-1">.</span><span class="hl-2">get</span><span class="hl-1">(</span><span class="hl-3">&#39;*&#39;</span><span class="hl-1">, (</span><span class="hl-0">req</span><span class="hl-1">, </span><span class="hl-0">res</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">res</span><span class="hl-1">.</span><span class="hl-2">status</span><span class="hl-1">(</span><span class="hl-6">404</span><span class="hl-1">)</span><br/><span class="hl-1">  </span><span class="hl-0">res</span><span class="hl-1">.</span><span class="hl-2">send</span><span class="hl-1">()</span><br/><span class="hl-1">})</span><br/><br/><br/><span class="hl-0">app</span><span class="hl-1">.</span><span class="hl-2">listen</span><span class="hl-1">(</span><span class="hl-6">3000</span><span class="hl-1">, () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-2">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Server is up on port 3000&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code></pre>
<p>Como se puede apreciar, definí un controlador en la parte inferior para la ruta *****, con el fin de interceptar las páginas no encontradas y devolver un código de error 404. En la parte superior, definí un controlador para la ruta /weather, donde se comprueba si se ha pasado un parámetro location, en caso de que no se haya pasado, se devuelve un código de error 400. En caso de que se haya pasado, se llama a la función weatherInfo, que se encarga de realizar la petición a WeatherStack. En caso de que se produzca un error, se devuelve un código de error 500 y se envía el error al cliente. En caso de que no se produzca ningún error, se devuelve un código de estado 200 y se envía la respuesta al cliente.</p>

<a href="#conclusiones" id="conclusiones" style="color: inherit; text-decoration: none;">
  <h2>Conclusiones</h2>
</a>
<p>Esta práctica la veo como un resultado de muchos conocimientos previos, ya que de cierta forma me parece de las prácticas más vistosas, donde también se puede apreciar una funcionalidad interesante, al final con un poco más de detalles y unas plantillas HTML estaría listo para ser desplegado como una página sencilla de inventario de Funkos, misión que capaz en un futuro me planteo realizar.</p>
</div></div>
<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<nav class="tsd-navigation primary">
<details class="tsd-index-accordion" open><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Modules</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li class="current selected"><a href="modules.html">ull-<wbr/>esit-<wbr/>inf-<wbr/>dsi-<wbr/>22-<wbr/>23-<wbr/>prct09-<wbr/>funko-<wbr/>app-<wbr/>Daniel<wbr/>Felipe<wbr/>Gomez</a>
<ul>
<li class="tsd-kind-module"><a href="modules/pe_get_weather.html">pe/get_<wbr/>weather</a></li>
<li class="tsd-kind-module"><a href="modules/pe_prueba.html">pe/prueba</a></li>
<li class="tsd-kind-module"><a href="modules/pe_response_type.html">pe/response_<wbr/>type</a></li>
<li class="tsd-kind-module"><a href="modules/practica.html">practica</a></li>
<li class="tsd-kind-module"><a href="modules/practica_entities_funko.html">practica/entities/funko</a></li>
<li class="tsd-kind-module"><a href="modules/practica_enumerables_genero_funko_enum.html">practica/enumerables/genero_<wbr/>funko_<wbr/>enum</a></li>
<li class="tsd-kind-module"><a href="modules/practica_enumerables_tipo_funko_enum.html">practica/enumerables/tipo_<wbr/>funko_<wbr/>enum</a></li>
<li class="tsd-kind-module"><a href="modules/practica_handler_manejadorJSON.html">practica/handler/manejadorJSON</a></li>
<li class="tsd-kind-module"><a href="modules/practica_handler_menuFunko.html">practica/handler/menu<wbr/>Funko</a></li>
<li class="tsd-kind-module"><a href="modules/practica_interfaces_funko_interface.html">practica/interfaces/funko_<wbr/>interface</a></li>
<li class="tsd-kind-module"><a href="modules/practica_interfaces_funko_json_interface.html">practica/interfaces/funko_<wbr/>json_<wbr/>interface</a></li>
<li class="tsd-kind-module"><a href="modules/practica_response_type.html">practica/response_<wbr/>type</a></li></ul></li></ul></div></details></nav></div></div>
<div class="container tsd-generator">
<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div>
<div class="overlay"></div><script src="assets/main.js"></script></body></html>